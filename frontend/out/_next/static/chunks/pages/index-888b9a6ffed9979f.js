(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(r,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(535)}])},9424:function(r,t,n){"use strict";var e=n(5893),o=n(3238),i=n(3725),a=n(3894),u=(n(7294),n(1664)),s=n.n(u),l=n(7952);function c(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function d(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,o,i=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(i.push(e.value),!t||i.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return c(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(r){var t,n=r.id,u=r.creatorId,c=(0,l.UE)().data,f=d((0,l.jn)(),1)[0];return(null===c||void 0===c||null===(t=c.me)||void 0===t?void 0:t.id)!==u?null:(0,e.jsxs)(i.xu,{children:[(0,e.jsx)(s(),{href:"/post/edit[id]",as:"/post/edit/".concat(n),children:(0,e.jsx)(a.hU,{"aria-label":"Edit Post",mr:4,size:"lg",icon:(0,e.jsx)(o.dY,{})})}),(0,e.jsx)(a.hU,{"aria-label":"Delete Post",size:"lg",onClick:function(){return f({variables:{id:n},update:function(r){r.evict({id:"Post:"+n})}})},icon:(0,e.jsx)(o.pJ,{})})]})}},749:function(r,t,n){"use strict";n.d(t,{Z:function(){return j}});var e=n(5893),o=(n(7294),n(4051)),i=n.n(o),a=n(3725),u=n(3894),s=n(1664),l=n.n(s),c=n(7952),d=n(1163),f=n(6252);function h(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function v(r,t,n,e,o,i,a){try{var u=r[i](a),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(e,o)}function p(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,o,i=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(i.push(e.value),!t||i.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return h(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(r){r=null!==r?r:function(r){throw r}(new TypeError("Cannot destructure undefined")),(0,d.useRouter)();var t,n=p((0,c._y)(),2),o=n[0],s=n[1].loading,h=(0,f.x)(),x=(0,c.UE)({skip:!1}),m=x.data,j=null;return x.loading||(j=(null===m||void 0===m?void 0:m.me)?(0,e.jsxs)(a.kC,{align:"center",children:[(0,e.jsx)(l(),{href:"/create-post",children:(0,e.jsx)(u.zx,{mr:4,as:a.rU,variant:"outline",children:"Create Post"})}),(0,e.jsx)(a.xu,{mr:3,children:m.me.username}),(0,e.jsx)(u.zx,{onClick:(t=i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o();case 2:return r.next=4,h.resetStore();case 4:case"end":return r.stop()}}),r)})),function(){var r=this,n=arguments;return new Promise((function(e,o){var i=t.apply(r,n);function a(r){v(i,e,o,a,u,"next",r)}function u(r){v(i,e,o,a,u,"throw",r)}a(void 0)}))}),isLoading:s,variant:"link",children:"Logout"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l(),{href:"/login",children:(0,e.jsx)(a.rU,{color:"black",mr:2,children:"Login"})}),(0,e.jsx)(l(),{href:"/register",children:(0,e.jsx)(a.rU,{color:"black",mr:2,children:"Register"})})]})),(0,e.jsxs)(a.kC,{zIndex:1,position:"sticky",top:0,bg:"tomato",p:4,children:[(0,e.jsx)(l(),{href:"/",children:(0,e.jsx)(a.rU,{children:(0,e.jsx)(a.X6,{children:"Typescript GraphQL"})})}),(0,e.jsx)(a.xu,{ml:"auto",children:j})]})},m=n(6476),j=function(r){var t=r.children,n=r.variant;return(0,e.jsxs)("div",{children:[(0,e.jsx)(x,{}),(0,e.jsx)(m.Z,{variant:n,children:t})]})}},535:function(r,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var e=n(5893),o=n(3725),i=n(3894),a=n(1664),u=n.n(a),s=n(9424),l=n(749),c=n(4051),d=n.n(c),f=n(7294),h=n(7952),v=n(3238),p=n(7283);function x(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function m(r,t,n,e,o,i,a){try{var u=r[i](a),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(e,o)}function j(r){return function(){var t=this,n=arguments;return new Promise((function(e,o){var i=r.apply(t,n);function a(r){m(i,e,o,a,u,"next",r)}function u(r){m(i,e,o,a,u,"throw",r)}a(void 0)}))}}function y(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,o,i=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(i.push(e.value),!t||i.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return x(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(r,t){return t||(t=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(t)}}))}function b(){var r=g(["\n      fragment _ on Post {\n        id\n        points\n        voteStatus\n      }\n    "]);return b=function(){return r},r}function w(){var r=g(["\n        fragment __ on Post {\n          points\n          voteStatus\n        }\n      "]);return w=function(){return r},r}var S=function(r,t,n){var e=n.readFragment({id:"Post:"+t,fragment:(0,p.ZP)(b())});if(e){if(e.voteStatus===r)return;var o=e.points+(e.voteStatus?2:1)*r;n.writeFragment({id:"Post:"+t,fragment:(0,p.ZP)(w()),data:{points:o,voteStatus:r}})}},k=function(r){var t=r.post,n=(0,f.useState)("not-loading"),a=n[0],u=n[1],s=y((0,h.ot)(),1)[0];return(0,e.jsxs)(o.kC,{direction:"column",justifyContent:"center",alignItems:"center",mr:4,children:[(0,e.jsx)(i.hU,{onClick:j(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(1!==t.voteStatus){r.next=2;break}return r.abrupt("return");case 2:return u("updoot-loading"),r.next=5,s({variables:{postId:t.id,value:1},update:function(r){return S(1,t.id,r)}});case 5:u("not-loading");case 6:case"end":return r.stop()}}),r)}))),colorScheme:1===t.voteStatus?"green":void 0,isLoading:"updoot-loading"===a,"aria-label":"updoot post",icon:(0,e.jsx)(v.g8,{})}),t.points,(0,e.jsx)(i.hU,{onClick:j(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(-1!==t.voteStatus){r.next=2;break}return r.abrupt("return");case 2:return u("downdoot-loading"),r.next=5,s({variables:{postId:t.id,value:-1},update:function(r){return S(-1,t.id,r)}});case 5:u("not-loading");case 6:case"end":return r.stop()}}),r)}))),colorScheme:-1===t.voteStatus?"red":void 0,isLoading:"downdoot-loading"===a,"aria-label":"downdoot post",icon:(0,e.jsx)(v.v4,{})})]})},C=(0,n(1201).C)({ssr:!0})((function(){var r=(0,h.Bm)({variables:{limit:15,cursor:null},notifyOnNetworkStatusChange:!0}),t=r.data,n=r.error,a=r.loading,c=r.fetchMore,d=r.variables;return a||t?(0,e.jsxs)(l.Z,{children:[(0,e.jsxs)(o.kC,{children:[(0,e.jsx)(o.X6,{children:"Posts"}),(0,e.jsx)(u(),{href:"/create-post",children:(0,e.jsx)(i.zx,{ml:"auto",children:" Create Post"})})]}),(0,e.jsx)("br",{}),a&&!t?(0,e.jsx)("div",{children:"Loading..."}):(0,e.jsx)(o.Kq,{spacing:8,children:t.posts.posts.map((function(r){return r?(0,e.jsxs)(o.kC,{p:5,shadow:"md",borderWidth:"1px",children:[(0,e.jsx)(k,{post:r}),(0,e.jsxs)(o.xu,{flex:1,children:[(0,e.jsx)(u(),{href:"/post/[id]",as:"/post/".concat(r.id),children:(0,e.jsx)(o.rU,{children:(0,e.jsx)(o.X6,{fontSize:"xl",children:r.title})})}),(0,e.jsxs)(o.xv,{children:["Posted by ",r.creator.username]}),(0,e.jsxs)(o.kC,{children:[(0,e.jsx)(o.xv,{flex:1,mt:4,children:r.textSnippet}),(0,e.jsx)(o.xu,{ml:"auto",children:(0,e.jsx)(s.Z,{id:r.id,creatorId:r.creator.id})})]})]})]},r.id):null}))}),t&&t.posts.hasMore?(0,e.jsx)(o.kC,{children:(0,e.jsx)(i.zx,{onClick:function(){c({variables:{limit:null===d||void 0===d?void 0:d.limit,cursor:t.posts.posts[t.posts.posts.length-1].createdAt}})},isLoading:a,m:"auto",my:8,children:"load more"})}):null]}):(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:"No Posts Were Found"}),(0,e.jsx)("div",{children:null===n||void 0===n?void 0:n.message})]})}))}},function(r){r.O(0,[180,424,238,436,774,888,179],(function(){return t=8312,r(r.s=t);var t}));var t=r.O();_N_E=t}]);